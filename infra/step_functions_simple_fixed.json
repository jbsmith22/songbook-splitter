{
  "Comment": "SheetMusic Book Splitter Pipeline - Simple Test Version",
  "StartAt": "CheckAlreadyProcessed",
  "States": {
    "CheckAlreadyProcessed": {
      "Type": "Task",
      "Resource": "arn:aws:states:::lambda:invoke",
      "Parameters": {
        "FunctionName": "arn:aws:lambda:us-east-1:227027150061:function:jsmith-sheetmusic-splitter-check-processed",
        "Payload": {
          "book_id.$": "$.book_id"
        }
      },
      "ResultPath": "$.check_result",
      "Next": "RecordProcessingStart"
    },
    "RecordProcessingStart": {
      "Type": "Task",
      "Resource": "arn:aws:states:::lambda:invoke",
      "Parameters": {
        "FunctionName": "arn:aws:lambda:us-east-1:227027150061:function:jsmith-sheetmusic-splitter-record-start",
        "Payload": {
          "book_id.$": "$.book_id",
          "source_pdf_uri.$": "$.source_pdf_uri",
          "artist.$": "$.artist",
          "book_name.$": "$.book_name",
          "execution_arn.$": "$$.Execution.Id"
        }
      },
      "ResultPath": "$.start_result",
      "End": true
    }
  }
}
